<mvc:View
	height="100%"
	controllerName="sap.ui.demo.cart.controller.Checkout"
	xmlns:layout="sap.ui.layout"
	xmlns:form="sap.ui.layout.form"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns="sap.m"
	xmlns:core="sap.ui.core">
	<NavContainer id="wizardNavContainer">
		<pages>
			<Page
				id="wizardContentPage"
				title="{i18n>checkoutTitle}">
				<landmarkInfo>
					<PageAccessibleLandmarkInfo
						rootRole="Region"
						rootLabel="{i18n>Checkout_rootLabel}"
						contentRole="Main"
						contentLabel="{i18n>Checkout_contentLabel}"
						footerRole="Region"
						footerLabel="{i18n>Checkout_footerLabel}"/>
				</landmarkInfo>
				<headerContent>
					<Button
						id="returnToShopButton"
						type="Emphasized"
						text="{i18n>returnToShopButtonText}"
						press=".onReturnToShopButtonPress"/>
				</headerContent>
				<content>
					<Wizard
						id="shoppingCartWizard"
						complete="checkCompleted"
						enableBranching="true"
						finishButtonText="{i18n>checkoutWizardReviewbtn}">
						<steps>
							<WizardStep
								id="contentsStep"
								nextStep="paymentTypeStep"
								title="{i18n>checkoutContentsTitle}"
								icon="sap-icon://cart">
								<List
									id="entryList"
									noDataText="{i18n>cartNoData}"
									items="{
										path : 'local>/cartItems',
										sorter : {
											path : 'Name',
											descending : false
										}
								}">
									<items>
										<ObjectListItem
											intro="{local>Quantity} x"
											icon="{
												path : 'local>PictureUrl',
												formatter : '.formatter.pictureUrl'
											}"
											title="{local>Name}"
											number="{
												path : 'local>Price',
												formatter : '.formatter.price'
											}"
											numberUnit="EUR"
											press=".onEntryListPress"
											iconDensityAware="false">
											<firstStatus>
												<ObjectStatus
													text="{
														path : 'local>Status',
														formatter : '.formatter.statusText'
													}"
													state="{
														path : 'local>Status',
														formatter : '.formatter.statusState'
													}"/>
											</firstStatus>
										</ObjectListItem>
									</items>
								</List>
								<Bar>
									<contentRight>
										<Text
											text="TotalAmount INR"/>
									</contentRight>
								</Bar>
							</WizardStep>
							<WizardStep
								id="paymentTypeStep"
								title="{i18n>checkoutPaymentTitle}"
								complete="invoiceStep"
								icon="sap-icon://money-bills">
								<Text
									class="sapUiSmallMarginBottom"
									text="{i18n>checkoutPaymentText}"/>
									<HBox
										renderType="Bare"
										alignItems="Center"
										justifyContent="Center"
										width="100%">
										<SegmentedButton
												select="setPaymentMethod"
												id="paymentMethodSelection"
												selectedKey="{/SelectedPayment}">
												<items>
													<SegmentedButtonItem
														id="payViaCC"
														key="Credit Card"
														text="{i18n>checkoutPaymentCreditCard}"/>
													<SegmentedButtonItem
														id="payViaBank"
														key="Bank Transfer"
														text="{i18n>checkoutPaymentBankTransfer}"/>
													<SegmentedButtonItem
														id="payViaCOD"
														key="Cash on Delivery"
														text="{i18n>checkoutPaymentCod}"/>
												</items>
											</SegmentedButton>
										</HBox>
							</WizardStep>
							<WizardStep
								id="invoiceStep"
								title="{i18n>checkoutInvoiceAddressTitle}"
								subsequentSteps="deliveryAddressStep, deliveryTypeStep"
								activate=".onCheckStepActivation"
								complete="invoiceAddressComplete"
								icon="sap-icon://sales-quote"
								validated="false">
								<form:SimpleForm
									layout="ResponsiveGridLayout"
									editable="true">
									<Label text="{i18n>checkoutInvoiceAddressDifferentDeliveryAddress}">
										<layoutData>
											<layout:GridData span="XL4 L4 M4 S12"/>
										</layoutData>
									</Label>
									<CheckBox
										id="differentDeliveryAddress"
										selected="{/DifferentDeliveryAddress}"
										select="setDifferentDeliveryAddress">
										<layoutData>
											<layout:GridData span="XL8 L8 M8 S12"/>
										</layoutData>
									</CheckBox>
									<Label
										text="{i18n>checkoutInvoiceAddress}"
										required="true"
										labelFor="invoiceAddressAddress">
										<layoutData>
											<layout:GridData span="XL4 L4 M4 S12"/>
										</layoutData>
									</Label>
									<Input
										id="invoiceAddressAddress"
										placeholder="{i18n>addressText}"
										value="{
											path: '/InvoiceAddress/Address',
											type: 'sap.ui.model.type.String',
											constraints: {
												minLength: 4,
												search: '^[a-zA-Z-]+\\.?\\s?[0-9a-zA-Z\\s]*$'
											}
										}"
										change="checkInvoiceStep">
										<layoutData>
											<layout:GridData span="XL8 L8 M8 S12"/>
										</layoutData>
									</Input>
									<Label
										text="{i18n>checkoutInvoiceAddressCity}"
										required="true"
										labelFor="invoiceAddressCity">
										<layoutData>
											<layout:GridData span="XL4 L4 M4 S12"/>
										</layoutData>
									</Label>
									<Input
										id="invoiceAddressCity"
										placeholder="{i18n>cityText}"
										value="{
											path: '/InvoiceAddress/City',
											type: 'sap.ui.model.type.String',
											constraints: {
												minLength: 3,
												search: '^[a-zA-Z\\s]+$'
											}
										}"
										change="checkInvoiceStep">
										<layoutData>
											<layout:GridData span="XL8 L8 M8 S12"/>
										</layoutData>
									</Input>
									<Label
										text="{i18n>checkoutInvoiceAddressZip}"
										required="true"
										labelFor="invoiceAddressZip">
										<layoutData>
											<layout:GridData span="XL4 L4 M4 S12"/>
										</layoutData>
									</Label>
									<Input
										id="invoiceAddressZip"
										placeholder="{i18n>zipCodeText}"
										value="{
											path: '/InvoiceAddress/ZipCode',
											type: 'sap.ui.model.type.String',
											constraints: {
												minLength: 3,
												search: '^[0-9]+$'
											}
										}"
										change="checkInvoiceStep">
										<layoutData>
											<layout:GridData span="XL8 L8 M8 S12"/>
										</layoutData>
									</Input>
									<Label
										text="{i18n>checkoutInvoiceAddressCountry}"
										required="true"
										labelFor="invoiceAddressCountry">
										<layoutData>
											<layout:GridData span="XL4 L4 M4 S12"/>
										</layoutData>
									</Label>
									<Input
										id="invoiceAddressCountry"
										placeholder="{i18n>countryText}"
										value="{
											path: '/InvoiceAddress/Country',
											type: 'sap.ui.model.type.String',
											constraints: {
												minLength: 2,
												search: '^[a-zA-Z]+$'
											}
										}"
										change="checkInvoiceStep">
										<layoutData>
											<layout:GridData span="XL8 L8 M8 S12"/>
										</layoutData>
									</Input>
									<Label
										text="{i18n>checkoutInvoiceAddressNote}"
										required="false">
										<layoutData>
											<layout:GridData span="XL4 L4 M4 S12"/>
										</layoutData>
									</Label>
									<TextArea
										rows="8"
										placeholder="{i18n>noteText}"
										value="{/InvoiceAddress/Note}">
										<layoutData>
											<layout:GridData span="XL8 L8 M8 S12"/>
										</layoutData>
									</TextArea>
								</form:SimpleForm>
							</WizardStep>
					</Wizard>
				</content>
				<footer>
					<Bar id="wizardFooterBar" visible="{= ${message>/}.length === 0 ? false : true}">
						<contentLeft>
							<Button
								id="showPopoverButton"
								icon="sap-icon://message-popup"
								text="{= ${message>/}.length }"
								type="Emphasized"
								press=".onShowMessagePopoverPress"/>
						</contentLeft>
					</Bar>
				</footer>
			</Page>
		</pages>
	</NavContainer>
</mvc:View>
