sap.ui.define(["sap/ui/demo/cart/controller/BaseController","sap/ui/demo/cart/model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/Device","sap/ui/model/json/JSONModel"],function(e,t,r,o,i,a){"use strict";return e.extend("sap.ui.demo.cart.controller.Home",{formatter:t,onInit:function(){var e=this.getOwnerComponent().getRouter();e.getRoute("home").attachMatched(this._onRouteMatched,this)},_firstTime:true,_onRouteMatched:function(e){this.loadCategories();this.firstTwoDisplay();if(this._oPopover){this.closePopover()}},onSearch:function(){this._search()},onGridItemPress:function(e){if(e.getParameter("listItem").hasStyleClass("colorGreen")){e.getParameter("listItem").removeStyleClass("colorGreen")}else{e.getParameter("listItem").addStyleClass("colorGreen")}},onRefresh:function(){debugger;var e=this.byId("productList");var t=e.getBinding("items");var r=function(){this.byId("pullToRefresh").hide();t.detachDataReceived(r)}.bind(this);t.attachDataReceived(r);this._search()},_search:function(){debugger;var e=this.getView();var t=e.byId("productList");var i=e.byId("categoryList");var a=e.byId("searchField");var s=a.getValue().length!==0;t.setVisible(s);i.setVisible(!s);var n=t.getBinding("items");if(n){if(s){var d=new r("Name",o.Contains,a.getValue());n.filter([d])}else{n.filter([])}}},onCategoryListItemPress:function(e){var t=e.getSource().getBindingContext();var r=t.getModel();var o=r.getData(t.getPath()).id;this._router.navTo("category",{id:o});this._unhideMiddlePage()},onProductListSelect:function(e){debugger;var t=e.getParameter("listItem");this._showProduct(t)},onProductListItemPress:function(e){debugger;var t=e.getSource();this._showProduct(t)},_showProduct:function(e){debugger;var t=e.getBindingContext().getObject();this._router.navTo("product",{id:t.Category,productId:t.ProductId},!i.system.phone)},onBack:function(){debugger;this.getRouter().navTo("home")}})});