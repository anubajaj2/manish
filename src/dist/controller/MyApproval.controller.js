sap.ui.define(["sap/ui/demo/cart/controller/BaseController","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","sap/ui/demo/cart/model/formatter","sap/m/MessageToast","sap/ui/model/Filter"],function(t,e,o,a,r,n,i){"use strict";return t.extend("sap.ui.demo.cart.controller.MyApproval",{formatter:r,onInit:function(){var t=this.getRouter();t.getRoute("MyApproval").attachMatched(this._onRouteMatched,this)},_onRouteMatched:function(){var t=this;this._oLocalModel=this.getOwnerComponent().getModel("local");this.firstTwoDisplay();var e=new Date;e.setHours(0,0,0,0);var o=new sap.ui.model.Sorter("CreatedOn",true);var a=this.getView().byId("myProducts");a.bindAggregation("items",{path:"/Products",parameters:{expand:"ToPhotos",top:1},template:new sap.m.ObjectListItem({title:"{ProductId}- {Name}",intro:"{Category} / {SubCategory}",number:"{GrossWeight} gm",numberUnit:"{Tunch} T {Wastage} T",firstStatus:new sap.m.ObjectStatus({text:{path:"OverallStatus",formatter:r.prodText},state:{path:"OverallStatus",formatter:r.prodState}})}),filters:[new i("CreatedBy","EQ","'"+t.getView().getModel("local").getProperty("/CurrentUser")+"'")],sorter:o});a.attachUpdateFinished(this.counter,this)},counter:function(t){var e=t.getSource().getItems();var o=this.getView().getModel("local");var a=this.getView().getModel();for(var n=0;n<e.length;n++){var i=e[n].getBindingContextPath();var s=i+"/ToPhotos/0/Content";var u=r.getImageUrlFromContent(a.getProperty(s));e[n].setIcon(u)}},_odataExampleCall:function(){this.ODataHelper.callOData(this.getOwnerComponent().getModel(),"/YOURENTITYNAME","GET",{},{},this).then(function(t){that._oLocalModel.setProperty("/globalProperty",t.results)}).catch(function(t){n.show("cannot fetch the data")})},_onObjectMatched:function(t){},getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},_bindView:function(t){},_onBindingChange:function(){}})});