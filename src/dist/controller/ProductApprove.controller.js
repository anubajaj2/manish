sap.ui.define(["sap/ui/demo/cart/controller/BaseController","sap/ui/core/UIComponent","sap/m/MessageToast","sap/ui/demo/cart/model/formatter","sap/ui/model/json/JSONModel","sap/ui/model/Filter"],function(t,e,o,r,a,n){"use strict";return t.extend("sap.ui.demo.cart.controller.ProductApprove",{onInit:function(){var t=this.getOwnerComponent().getRouter();t.getRoute("ProductApprove").attachMatched(this._onRouteMatched,this)},_onRouteMatched:function(t){var e=new sap.ui.model.Sorter("CreatedOn",true);var o=this.getView().byId("idListPA");o.bindAggregation("items",{path:"/Products",parameters:{expand:"ToPhotos",top:1},template:new sap.m.ObjectListItem({title:"{ProductId}- {Name}",intro:"{Category} / {SubCategory}",number:"{GrossWeight} gm",numberUnit:"{Tunch} T {Wastage} T",firstStatus:new sap.m.ObjectStatus({text:{path:"OverallStatus",formatter:r.prodText},state:{path:"OverallStatus",formatter:r.prodState}})}),filters:[new sap.ui.model.Filter("OverallStatus","EQ","N")],sorter:e});o.attachUpdateFinished(this.counter,this)},counter:function(t){var e=t.getSource().getItems();var o=this.getView().getModel("local");var a=this.getView().getModel();for(var n=0;n<e.length;n++){var s=e[n].getBindingContextPath();var i=s+"/ToPhotos/0/Content";var u=r.getImageUrlFromContent(a.getProperty(i));e[n].setIcon(u)}},onApprove:function(){var t=this.getView().byId("idListPA").getSelectedContextPaths();t.forEach((t,e)=>{this.getOwnerComponent().getModel().update(t,{OverallStatus:"A"},{success:function(){o.show("Items Approved Successfully")},error:function(t){o.show("Problem in Aprooving")}})})},onReject:function(){var t=this.getView().byId("idListPA").getSelectedContextPaths();t.forEach((t,e)=>{this.getOwnerComponent().getModel().update(t,{OverallStatus:"R"},{success:function(){o.show("Items Rejected Successfully")},error:function(t){o.show("Problem in Rejection")}})})}})});